Version 4
SHEET 1 6384 976
WIRE 4432 -304 288 -304
WIRE 832 -144 736 -144
WIRE 976 -144 832 -144
WIRE 1072 -144 976 -144
WIRE 1216 -144 1072 -144
WIRE 1312 -144 1216 -144
WIRE 1456 -144 1456 -192
WIRE 1456 -144 1312 -144
WIRE 1552 -144 1456 -144
WIRE 1696 -144 1552 -144
WIRE 1792 -144 1696 -144
WIRE 1936 -144 1792 -144
WIRE 2032 -144 1936 -144
WIRE 2176 -144 2032 -144
WIRE 2288 -144 2176 -144
WIRE 2448 -144 2288 -144
WIRE 2544 -144 2448 -144
WIRE 2688 -144 2544 -144
WIRE 2800 -144 2688 -144
WIRE 2928 -144 2800 -144
WIRE 3024 -144 2928 -144
WIRE 3168 -144 3024 -144
WIRE 3280 -144 3168 -144
WIRE 3424 -144 3280 -144
WIRE 3520 -144 3424 -144
WIRE 3664 -144 3520 -144
WIRE 3776 -144 3664 -144
WIRE 880 -96 640 -96
WIRE 1120 -96 880 -96
WIRE 1360 -96 1120 -96
WIRE 1600 -96 1360 -96
WIRE 1840 -96 1600 -96
WIRE 2080 -96 1840 -96
WIRE 2352 -96 2080 -96
WIRE 2592 -96 2352 -96
WIRE 2832 -96 2592 -96
WIRE 3072 -96 2832 -96
WIRE 3328 -96 3072 -96
WIRE 3568 -96 3328 -96
WIRE 736 -80 736 -144
WIRE 976 -80 976 -144
WIRE 1216 -80 1216 -144
WIRE 1456 -80 1456 -144
WIRE 1696 -80 1696 -144
WIRE 1936 -80 1936 -144
WIRE 2176 -80 2176 -144
WIRE 2448 -80 2448 -144
WIRE 2688 -80 2688 -144
WIRE 2928 -80 2928 -144
WIRE 3168 -80 3168 -144
WIRE 3424 -80 3424 -144
WIRE 3664 -80 3664 -144
WIRE 640 -64 640 -96
WIRE 640 -64 544 -64
WIRE 688 -64 640 -64
WIRE 880 -64 880 -96
WIRE 928 -64 880 -64
WIRE 1120 -64 1120 -96
WIRE 1168 -64 1120 -64
WIRE 1360 -64 1360 -96
WIRE 1408 -64 1360 -64
WIRE 1600 -64 1600 -96
WIRE 1648 -64 1600 -64
WIRE 1840 -64 1840 -96
WIRE 1888 -64 1840 -64
WIRE 2080 -64 2080 -96
WIRE 2128 -64 2080 -64
WIRE 2352 -64 2352 -96
WIRE 2400 -64 2352 -64
WIRE 2592 -64 2592 -96
WIRE 2640 -64 2592 -64
WIRE 2832 -64 2832 -96
WIRE 2880 -64 2832 -64
WIRE 3072 -64 3072 -96
WIRE 3120 -64 3072 -64
WIRE 3328 -64 3328 -96
WIRE 3376 -64 3328 -64
WIRE 3568 -64 3568 -96
WIRE 3616 -64 3568 -64
WIRE 832 -32 832 -144
WIRE 832 -32 736 -32
WIRE 1072 -32 1072 -144
WIRE 1072 -32 976 -32
WIRE 1312 -32 1312 -144
WIRE 1312 -32 1216 -32
WIRE 1552 -32 1552 -144
WIRE 1552 -32 1456 -32
WIRE 1792 -32 1792 -144
WIRE 1792 -32 1696 -32
WIRE 2032 -32 2032 -144
WIRE 2032 -32 1936 -32
WIRE 2288 -32 2288 -144
WIRE 2288 -32 2176 -32
WIRE 2544 -32 2544 -144
WIRE 2544 -32 2448 -32
WIRE 2800 -32 2800 -144
WIRE 2800 -32 2688 -32
WIRE 3024 -32 3024 -144
WIRE 3024 -32 2928 -32
WIRE 3280 -32 3280 -144
WIRE 3280 -32 3168 -32
WIRE 3520 -32 3520 -144
WIRE 3520 -32 3424 -32
WIRE 3776 -32 3776 -144
WIRE 3776 -32 3664 -32
WIRE 736 192 736 16
WIRE 976 192 976 16
WIRE 1216 192 1216 16
WIRE 1456 192 1456 16
WIRE 1696 192 1696 16
WIRE 1936 192 1936 16
WIRE 2176 192 2176 16
WIRE 2448 192 2448 16
WIRE 2688 192 2688 16
WIRE 2928 192 2928 16
WIRE 3168 192 3168 16
WIRE 3424 192 3424 16
WIRE 3664 192 3664 16
WIRE 288 224 288 -304
WIRE 704 224 288 224
WIRE 944 224 800 224
WIRE 1184 224 1040 224
WIRE 1424 224 1280 224
WIRE 1664 224 1520 224
WIRE 1904 224 1760 224
WIRE 2144 224 2000 224
WIRE 2416 224 2240 224
WIRE 2656 224 2512 224
WIRE 2896 224 2752 224
WIRE 3136 224 2992 224
WIRE 3392 224 3232 224
WIRE 3632 224 3488 224
WIRE 4432 224 4432 -304
WIRE 4432 224 3728 224
WIRE 4560 224 4432 224
WIRE 4848 224 4656 224
WIRE 5168 224 4944 224
WIRE 736 336 736 256
WIRE 976 336 976 256
WIRE 1216 336 1216 256
WIRE 1456 336 1456 256
WIRE 1696 336 1696 256
WIRE 1936 336 1936 256
WIRE 2176 336 2176 256
WIRE 2448 336 2448 256
WIRE 2688 336 2688 256
WIRE 2928 336 2928 256
WIRE 3168 336 3168 256
WIRE 3424 336 3424 256
WIRE 3664 336 3664 256
WIRE 832 384 736 384
WIRE 1072 384 976 384
WIRE 1312 384 1216 384
WIRE 1552 384 1456 384
WIRE 1792 384 1696 384
WIRE 2032 384 1936 384
WIRE 2272 384 2176 384
WIRE 2544 384 2448 384
WIRE 2784 384 2688 384
WIRE 3024 384 2928 384
WIRE 3264 384 3168 384
WIRE 3520 384 3424 384
WIRE 3760 384 3664 384
WIRE 272 400 224 400
WIRE 48 416 -32 416
WIRE 640 416 544 416
WIRE 688 416 640 416
WIRE 928 416 880 416
WIRE 1168 416 1120 416
WIRE 1408 416 1360 416
WIRE 1648 416 1600 416
WIRE 1888 416 1840 416
WIRE 2128 416 2080 416
WIRE 2400 416 2352 416
WIRE 2640 416 2592 416
WIRE 2880 416 2832 416
WIRE 3120 416 3072 416
WIRE 3376 416 3328 416
WIRE 3616 416 3568 416
WIRE 272 432 224 432
WIRE 640 448 640 416
WIRE 880 448 880 416
WIRE 880 448 640 448
WIRE 1120 448 1120 416
WIRE 1120 448 880 448
WIRE 1360 448 1360 416
WIRE 1360 448 1120 448
WIRE 1600 448 1600 416
WIRE 1600 448 1360 448
WIRE 1840 448 1840 416
WIRE 1840 448 1600 448
WIRE 2080 448 2080 416
WIRE 2080 448 1840 448
WIRE 2352 448 2352 416
WIRE 2352 448 2080 448
WIRE 2592 448 2592 416
WIRE 2592 448 2352 448
WIRE 2832 448 2832 416
WIRE 2832 448 2592 448
WIRE 3072 448 3072 416
WIRE 3072 448 2832 448
WIRE 3328 448 3328 416
WIRE 3328 448 3072 448
WIRE 3568 448 3568 416
WIRE 3568 448 3328 448
WIRE -192 496 -192 464
WIRE -32 496 -32 416
WIRE 736 512 736 432
WIRE 832 512 832 384
WIRE 832 512 736 512
WIRE 976 512 976 432
WIRE 976 512 832 512
WIRE 1072 512 1072 384
WIRE 1072 512 976 512
WIRE 1216 512 1216 432
WIRE 1216 512 1072 512
WIRE 1312 512 1312 384
WIRE 1312 512 1216 512
WIRE 1456 512 1456 432
WIRE 1456 512 1312 512
WIRE 1552 512 1552 384
WIRE 1552 512 1456 512
WIRE 1696 512 1696 432
WIRE 1696 512 1552 512
WIRE 1792 512 1792 384
WIRE 1792 512 1696 512
WIRE 1936 512 1936 432
WIRE 1936 512 1792 512
WIRE 2032 512 2032 384
WIRE 2032 512 1936 512
WIRE 2176 512 2176 432
WIRE 2176 512 2032 512
WIRE 2272 512 2272 384
WIRE 2272 512 2176 512
WIRE 2448 512 2448 432
WIRE 2448 512 2272 512
WIRE 2544 512 2544 384
WIRE 2544 512 2448 512
WIRE 2688 512 2688 432
WIRE 2688 512 2544 512
WIRE 2784 512 2784 384
WIRE 2784 512 2688 512
WIRE 2928 512 2928 432
WIRE 2928 512 2784 512
WIRE 3024 512 3024 384
WIRE 3024 512 2928 512
WIRE 3168 512 3168 432
WIRE 3168 512 3024 512
WIRE 3264 512 3264 384
WIRE 3264 512 3168 512
WIRE 3424 512 3424 432
WIRE 3424 512 3264 512
WIRE 3520 512 3520 384
WIRE 3520 512 3424 512
WIRE 3664 512 3664 432
WIRE 3664 512 3520 512
WIRE 3760 512 3760 384
WIRE 3760 512 3664 512
WIRE 1456 560 1456 512
WIRE -192 608 -192 576
WIRE -32 608 -32 576
FLAG -192 608 0
FLAG -192 464 Vdd
FLAG -32 608 0
FLAG 1456 560 0
FLAG 1456 -192 Vdd
FLAG -32 416 VIN
FLAG 272 400 VP
FLAG 272 432 VN
FLAG 544 416 VN
FLAG 544 -64 VP
FLAG 5168 224 clkOut
SYMBOL voltage -192 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 1.8
SYMBOL voltage -32 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {VIN}
SYMBOL pmos4 688 16 M180
SYMATTR InstName M3
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 688 336 R0
SYMATTR InstName M4
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 928 16 M180
SYMATTR InstName M5
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 928 336 R0
SYMATTR InstName M6
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 1168 16 M180
SYMATTR InstName M7
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 1168 336 R0
SYMATTR InstName M8
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 1408 16 M180
SYMATTR InstName M9
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 1408 336 R0
SYMATTR InstName M10
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 1648 16 M180
SYMATTR InstName M11
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 1648 336 R0
SYMATTR InstName M12
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 1888 16 M180
SYMATTR InstName M13
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 1888 336 R0
SYMATTR InstName M14
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 2128 16 M180
SYMATTR InstName M15
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 2128 336 R0
SYMATTR InstName M16
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL inversor4 720 224 R0
SYMATTR InstName X1
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 960 224 R0
SYMATTR InstName X2
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 1200 224 R0
SYMATTR InstName X3
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 1440 224 R0
SYMATTR InstName X4
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 1680 224 R0
SYMATTR InstName X5
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 1920 224 R0
SYMATTR InstName X6
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 2160 224 R0
SYMATTR InstName X7
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL vco_current_source 96 416 R0
SYMATTR SpiceLine VDD=1.8 L={L_CS} W_BASE={WN_CS} WPFACT=1.5 WIDE_FACT=3 LD=0.48u R=10k
SYMATTR InstName X8
SYMBOL pmos4 2400 16 M180
SYMATTR InstName M1
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 2400 336 R0
SYMATTR InstName M2
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 2640 16 M180
SYMATTR InstName M17
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 2640 336 R0
SYMATTR InstName M18
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 2880 16 M180
SYMATTR InstName M19
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 2880 336 R0
SYMATTR InstName M20
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 3120 16 M180
SYMATTR InstName M21
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 3120 336 R0
SYMATTR InstName M22
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 3376 16 M180
SYMATTR InstName M23
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 3376 336 R0
SYMATTR InstName M24
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL pmos4 3616 16 M180
SYMATTR InstName M25
SYMATTR Value CMOSP
SYMATTR Value2 l={L_CS} w={WP_CS} ad={ADS(WP_CS, LD)} as={ADS(WP_CS, LD)} pd={PDS(WP_CS, LD)} ps={PDS(WP_CS, LD)}
SYMBOL nmos4 3616 336 R0
SYMATTR InstName M26
SYMATTR Value CMOSN
SYMATTR Value2 l={L_CS} w={WN_CS} ad={ADS(WN_CS, LD)} as={ADS(WN_CS, LD)} pd={PDS(WN_CS, LD)} ps={PDS(WN_CS, LD)}
SYMBOL inversor4 2432 224 R0
SYMATTR InstName X8
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 2672 224 R0
SYMATTR InstName X9
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 2912 224 R0
SYMATTR InstName X10
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 3152 224 R0
SYMATTR InstName X11
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 3408 224 R0
SYMATTR InstName X12
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor4 3648 224 R0
SYMATTR InstName X13
SYMATTR SpiceLine VDD=1.8 L={L_INV} LD={LD} WN={WN_INV} WPFACT=1.5
SYMBOL inversor 4576 224 R0
SYMATTR InstName X14
SYMBOL inversor 4864 224 R0
SYMATTR InstName X15
TEXT -216 -112 Left 2 !.include "TSMC180.lib"
TEXT -216 -40 Left 2 !.func ADS(w, ld) = {w * ld}
TEXT -216 -8 Left 2 !.func PDS(w, ld) {w + 2*ld}
TEXT -216 56 Left 2 !.param L_INV = 0.18u
TEXT -216 -72 Left 2 !.param LD = 0.48u
TEXT -104 696 Left 2 !.tran 0 1u 0 100p
TEXT -216 88 Left 2 !.param WN_INV = 0.42u
TEXT -216 136 Left 2 !.param L_CS = 1u
TEXT -216 168 Left 2 !.param WN_CS = 25u
TEXT -104 664 Left 2 !.step param VIN 0 1.8 0.3
TEXT -216 200 Left 2 !.param WPFACT_CS = 1.5
TEXT -216 232 Left 2 !.param WP_CS = { WN_CS * WPFACT_CS }
TEXT 4760 416 Left 2 !.meas PERIOD TRIG V(clkOut)=0.9 TD={DELAY_BEFORE_SAMPLE} RISE=1 TARG V(clkOut)=0.9 TD={DELAY_BEFORE_SAMPLE} RISE=101
TEXT 4760 440 Left 2 !.meas FREQ PARAM 100/(PERIOD)
TEXT 4760 472 Left 2 !.meas TH TRIG V(clkOut)=1.7 RISE=300 TARG V(clkOut)=1.7 FALL=300
TEXT 4760 496 Left 2 !.meas TL TRIG V(clkOut)=0.1 FALL=300 TARG V(clkOut)=0.1 RISE=301
TEXT 4760 520 Left 2 !.meas DUTY_CYCLE_PERCENNT PARAM 100*TH/(TH+TL)
TEXT 4768 376 Left 2 !.param DELAY_BEFORE_SAMPLE 800n
TEXT 4760 544 Left 2 !.meas DUTY_CYCLE_2 INTEG 100*V(clkOut)/(1.8*200n) FROM 800n TO 1u
